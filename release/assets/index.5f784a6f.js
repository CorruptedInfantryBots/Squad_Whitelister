var E=Object.defineProperty,M=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var P=(t,e,n)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c=(t,e)=>{for(var n in e||(e={}))O.call(e,n)&&P(t,n,e[n]);if(L)for(var n of L(e))I.call(e,n)&&P(t,n,e[n]);return t},f=(t,e)=>M(t,R(e));import{o as a,c as i,r as G,d as C,a as l,t as u,b as d,w as S,e as r,f as g,$ as h,n as y,g as v,F as _,h as T,i as B,u as W,M as V,j as A,k as H,l as U,v as q,m as D}from"./vendor.1da0a40a.js";const z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const p of s)if(p.type==="childList")for(const b of p.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function n(s){const p={};return s.integrity&&(p.integrity=s.integrity),s.referrerpolicy&&(p.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?p.credentials="include":s.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(s){if(s.ep)return;s.ep=!0;const p=n(s);fetch(s.href,p)}};z();var $=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n};const J={},K={class:"blackoutBackground"};function Z(t,e){return a(),i("div",K,[G(t.$slots,"default",{},void 0,!0)])}var Q=$(J,[["render",Z],["__scopeId","data-v-cba66cae"]]);const X={class:"btnContainer"},Y={props:{title:{default:"Popup",type:String},hideConfirm:{default:!1,type:Boolean},hideCancel:{default:!1,type:Boolean},confirmText:{default:"Confirm",type:String},cancelText:{default:"Cancel",type:String},noBlackBg:{default:!1,type:Boolean}},methods:{checkInputs(t){let e=this.getInputs(),n=!0,o={};for(let s of e)if((!s.value||s.value=="")&&!s.hasAttribute("optional"))this.blinkBgColor(s),n=!1;else{let p=s.name,b=!0;if(s.hasAttribute("regex")&&!(s.value==""&&s.hasAttribute("optional"))&&(b=s.value.match(new RegExp(s.getAttribute("regex"))),b||(n=!1,this.blinkBgColor(s))),b)if(s.nodeName=="SELECT"&&s.hasAttribute("multiple")){let k=[...s.querySelectorAll("option")].filter(j=>j.selected),N=[];for(let j of k)N.push(j._value);o[p]=N}else s.type=="checkbox"?o[p]=s.checked:o[p]=s.value}n&&this.$emit("confirmBtnClick",o)},blinkBgColor(t,e="#a228"){if(t instanceof Array)for(let n of t)this.rawBlink(n,e);else this.rawBlink(t,e)},rawBlink(t,e){t.style.backgroundColor=e,setTimeout(()=>{t.style.backgroundColor=""},2e3)},getInputs(){return this.$el.querySelectorAll("input,select")},blinkAll(t="#a228"){for(let e of this.getInputs())this.rawBlink(e,t)},blinkName(t,e="#a228"){this.rawBlink(this.$el.querySelector('input[name="'+t+'"]'),e)}},created(){this.$nextTick(()=>{this.getInputs()[0].focus()})}},F=C(f(c({},Y),{setup(t){return(e,n)=>(a(),i("div",null,[l("div",{class:"popupContainer",onKeyup:[n[2]||(n[2]=S((...o)=>e.checkInputs&&e.checkInputs(...o),["enter"])),n[3]||(n[3]=S(o=>t.hideCancel?"":e.$emit("cancelBtnClick"),["escape"]))]},[l("h1",null,u(t.title),1),G(e.$slots,"default",{},void 0,!0),l("div",X,[t.hideCancel?d("",!0):(a(),i("button",{key:0,id:"btnCancel",onClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick"))},u(t.cancelText),1)),t.hideConfirm?d("",!0):(a(),i("button",{key:1,id:"btnConfirm",onClick:n[1]||(n[1]=(...o)=>e.checkInputs&&e.checkInputs(...o))},u(t.confirmText),1))])],32)]))}}));var m=$(F,[["__scopeId","data-v-06c8254e"]]);const x=l("input",{name:"username",type:"text",placeholder:"Username"},null,-1),ee=l("input",{name:"password",type:"password",placeholder:"Password"},null,-1),te={methods:{loginBtnClick(t){console.log("attempting login",t),h.ajax({url:"/api/login",type:"post",data:t,dataType:"json",success:e=>{console.log(e),this.$emit("login_done"),location.reload()},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})}},components:{popup:m}},ne=C(f(c({},te),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupLogin",title:"Login","confirm-text":"Login",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.loginBtnClick,"hide-cancel":!1},{default:g(()=>[x,ee]),_:1},8,["onConfirmBtnClick"]))}})),oe=l("input",{name:"username",type:"text",placeholder:"Username"},null,-1),ae=l("input",{name:"password",type:"password",placeholder:"Password"},null,-1),le=l("input",{name:"conf_password",type:"password",placeholder:"Confirm Password"},null,-1),se=l("input",{name:"clan_code",type:"text",placeholder:"Clan Code"},null,-1),ie=l("input",{name:"discord_username",type:"text",placeholder:"Discord Username",optional:"",regex:"^.{3,32}#[0-9]{4}$"},null,-1),re={methods:{confBtnClick(t){const e=this.$refs.popupLogin;t.password==t.conf_password?(console.log("attempting signup",t),h.ajax({url:"/api/signup",type:"post",data:t,dataType:"json",success:n=>{console.log(n),this.$emit("registration_done"),location.reload()},error:n=>{console.error(n),e.blinkAll()}})):(e.blinkName("password"),e.blinkName("conf_password"))}},components:{popup:m}},ue=C(f(c({},re),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupLogin",title:"Sign Up","confirm-text":"Sign Up",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confBtnClick,"hide-cancel":!1},{default:g(()=>[oe,ae,le,se,ie]),_:1},8,["onConfirmBtnClick"]))}}));const pe={props:{visible:{type:Boolean}}};function de(t,e,n,o,s,p){return a(),i("div",{id:"tabBrowser",class:y({visible:n.visible})},[G(t.$slots,"default",{},void 0,!0)],2)}var ce=$(pe,[["render",de],["__scopeId","data-v-2dda0152"]]);const me={props:{title:{default:"Button",type:String},currentTab:{default:"Home",type:String}}};function ge(t,e,n,o,s,p){return a(),i("button",{onClick:e[0]||(e[0]=b=>t.$emit("updateTab",n.title)),class:y([n.title==n.currentTab?"active":""])},u(n.title),3)}var fe=$(me,[["render",ge],["__scopeId","data-v-0ef7f6ff"]]);const _e={props:{visible:{type:Boolean},horizontal:{type:Boolean,default:!1},currentTab:{type:String,default:""}}};function he(t,e,n,o,s,p){return a(),i("div",{class:y(["tab",{horizontal:n.horizontal,[n.currentTab]:!0}])},[G(t.$slots,"default",{},void 0,!0)],2)}var w=$(_e,[["render",he],["__scopeId","data-v-0bdde0b7"]]);const Ce=l("input",{name:"full_name",type:"text",placeholder:"Full Clan Name"},null,-1),ve=l("input",{name:"tag",type:"text",placeholder:"Clan Tag"},null,-1),be={name:"available_groups",placeholder:"Available Groups",multiple:"",optional:""},ke=["value"],$e=l("label",null,[T("Always Require Approval"),l("input",{name:"confirmation_ovrd",type:"checkbox",placeholder:"Confirmation Override"})],-1),ye={data(){return{available_game_groups:[]}},methods:{confirmBtnClick(t){h.ajax({url:"/api/clans/newClan",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",success:e=>{console.log(e),this.$emit("new_clan",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})},getGameGroups(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log(t),this.available_game_groups=t})}},components:{popup:m},created(){this.getGameGroups()}},we=C(f(c({},ye),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupLogin",title:"New Clan",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confirmBtnClick},{default:g(()=>[Ce,ve,l("select",be,[(a(!0),i(_,null,v(e.available_game_groups.sort(),o=>(a(),i("option",{value:o._id},u(o.group_name),9,ke))),256))]),$e]),_:1},8,["onConfirmBtnClick"]))}})),Be=l("input",{name:"group_name",type:"text",placeholder:"Group Name",regex:"^[a-zA-Z\\d]{2,}$"},null,-1),Te={name:"group_permissions",multiple:""},Ge=["value"],je=l("label",null,[T("Require Approval"),l("input",{name:"require_appr",type:"checkbox",placeholder:"Require Approval"})],-1),Ae={data(){return{permissions:["startvote","changemap","pause","cheat","private","balance","chat","kick","ban","config","cameraman","immune","manageserver","featuretest","reserve","demos","clientdemos","debug","teamchange","forceteamchange","canseeadminchat"]}},methods:{confirmBtnClick(t){console.log(t),h.ajax({url:"/api/gameGroups/write/newGroup",type:"post",dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:e=>{console.log(e),this.$emit("new_game_group",e)},error:e=>{console.error(e),this.$refs.popupComp.blinkAll()}})}},components:{popup:m}},Ne=C(f(c({},Ae),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupComp",title:"New Group",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confirmBtnClick},{default:g(()=>[Be,l("select",Te,[(a(!0),i(_,null,v(e.permissions.sort(),o=>(a(),i("option",{value:o},u(o),9,Ge))),256))]),je]),_:1},8,["onConfirmBtnClick"]))}}));const Le={class:"clanCard"},Pe={class:"clanName"},Se={class:"clanTag tag"},Ue={class:"mainClanContainer"},qe={class:"hoverMenu"},Ee={class:"clanCode"},Me={data(){return{clan_data:{}}},props:{clan_data:{required:!0,type:Object}},methods:{deleteClan:function(t){console.log("Removing",this.$props.clan_data),h.ajax({url:"/api/clans/removeClan",type:"post",data:this.$props.clan_data,dataType:"json",success:e=>{console.log(e),t()}})}}},Re=C(f(c({},Me),{setup(t){return(e,n)=>(a(),i("div",Le,[l("div",Pe,[l("span",Se,u(t.clan_data.tag),1),B(W(V),{duration:10,paused:!1},{default:g(()=>[T(u(t.clan_data.full_name),1)]),_:1})]),l("div",Ue,[l("div",qe,[l("button",{onClick:n[0]||(n[0]=o=>e.$emit("confirm",{clan_data:t.clan_data,callback:e.deleteClan}))},"Delete"),l("button",{onClick:n[1]||(n[1]=o=>e.$emit("edit_clan",{clan_data:t.clan_data}))},"Manage"),l("button",{onClick:n[2]||(n[2]=o=>e.$emit("edit_clan_users",{clan_data:t.clan_data}))},"Admins")])]),l("div",Ee,u(t.clan_data.clan_code),1)]))}}));var Oe=$(Re,[["__scopeId","data-v-464e509a"]]);const Ie={key:0},We={data(){return{title:"",text:"",confirmBtnText:"Confirm",confirmBtnShow:!0,rejectBtnText:"Reject",rejectBtnShow:!0,callback:()=>{}}},methods:{setProps:function(t,e){this.title=t,this.text=e},setCallback:function(t=()=>{}){this.callback=t}},components:{popup:m}},Ve=C(f(c({},We),{setup(t){return(e,n)=>(a(),r(m,{ref:"confirmPopup",title:e.title,onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.callback},{default:g(()=>[e.text!=""?(a(),i("span",Ie,u(e.text),1)):d("",!0)]),_:1},8,["title","onConfirmBtnClick"]))}}));const He={class:"gameGroupCard"},De={class:"groupName tag"},ze={class:"tag"},Je={data(){return{clan_data:{},onHover:!1,hoverMenuLeft:0}},props:{group_data:{required:!0,type:Object},hoverMenuVisible:{required:!1,type:Boolean,default:!0}},methods:{deleteGroup:function(t){console.log("Removing",this.$props.group_data),h.ajax({url:"/api/gameGroups/write/remove",type:"post",data:this.$props.group_data,dataType:"json",success:e=>{console.log(e),t()}})},updateHoverMenuLeft:function(t){this.hoverMenuLeft=t.target.scrollLeft}}},Ke=C(f(c({},Je),{setup(t){return A(e=>({"3596b610":e.hoverMenuLeft+"px"})),(e,n)=>(a(),i("div",He,[l("div",De,u(t.group_data.group_name),1),l("div",{class:"mainGroupContainer",onScroll:n[2]||(n[2]=(...o)=>e.updateHoverMenuLeft&&e.updateHoverMenuLeft(...o))},[(a(!0),i(_,null,v(t.group_data.group_permissions,o=>(a(),i("span",ze,u(o),1))),256)),t.hoverMenuVisible?(a(),i("div",{key:0,class:y(["hoverMenu",{vis:e.onHover}])},[l("button",{onClick:n[0]||(n[0]=o=>e.$emit("confirm",{group_data:t.group_data,callback:e.deleteGroup}))},"Delete"),l("button",{onClick:n[1]||(n[1]=o=>e.$emit("edit",{group_data:t.group_data}))},"Edit")],2)):d("",!0)],32)]))}}));var Ze=$(Ke,[["__scopeId","data-v-267231b4"]]);const Qe=["value"],Xe=["value"],Ye={name:"available_groups",placeholder:"Available Groups",multiple:"",optional:""},Fe=["value","selected"],xe=T("Always Require Approval"),et=["checked"],tt={data(){return{available_game_groups:[]}},props:{clan_data:{type:Object,default:{}}},methods:{confirmBtnClick(t){h.ajax({url:"/api/clans/editClan",type:"post",data:JSON.stringify(c({_id:this.clan_data._id},t)),dataType:"json",contentType:"application/json",success:e=>{console.log(e),this.$emit("clan_edited",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})},getGameGroups(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log(t),this.available_game_groups=t})}},components:{popup:m},created(){this.getGameGroups(),console.log(this.clan_data)}},nt=C(f(c({},tt),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupLogin",title:"Edit Clan",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confirmBtnClick},{default:g(()=>[l("input",{name:"full_name",type:"text",placeholder:"Full Clan Name",value:t.clan_data.full_name},null,8,Qe),l("input",{name:"tag",type:"text",placeholder:"Clan Tag",value:t.clan_data.tag},null,8,Xe),l("select",Ye,[(a(!0),i(_,null,v(e.available_game_groups.sort(),o=>(a(),i("option",{value:o._id,selected:t.clan_data.available_groups.includes(o._id)},u(o.group_name),9,Fe))),256))]),l("label",null,[xe,l("input",{name:"confirmation_ovrd",type:"checkbox",checked:t.clan_data.confirmation_ovrd,placeholder:"Confirmation Override"},null,8,et)])]),_:1},8,["onConfirmBtnClick"]))}})),ot=["value"],at={name:"group_permissions",multiple:""},lt=["value","selected"],st=T("Require Approval"),it=["checked"],rt={data(){return{permissions:["startvote","changemap","pause","cheat","private","balance","chat","kick","ban","config","cameraman","immune","manageserver","featuretest","reserve","demos","clientdemos","debug","teamchange","forceteamchange","canseeadminchat"]}},props:{group_data:{type:Object,default:{}}},methods:{confirmBtnClick(t){console.log(t),h.ajax({url:"/api/gameGroups/write/editGroup",type:"post",dataType:"json",data:JSON.stringify(c({_id:this.group_data._id},t)),contentType:"application/json",success:e=>{console.log(e),this.$emit("edited",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupComp.blinkAll()}})}},created(){console.log(this.group_data)},components:{popup:m}},ut=C(f(c({},rt),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupComp",title:"Edit Group",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confirmBtnClick},{default:g(()=>[l("input",{name:"group_name",type:"text",placeholder:"Group Name",value:t.group_data.group_name,regex:"^[a-zA-Z\\d]{2,}$"},null,8,ot),l("select",at,[(a(!0),i(_,null,v(e.permissions.sort(),o=>(a(),i("option",{value:o,selected:t.group_data.group_permissions.includes(o)},u(o),9,lt))),256))]),l("label",null,[st,l("input",{name:"require_appr",type:"checkbox",placeholder:"Require Approval",checked:t.group_data.require_appr},null,8,it)])]),_:1},8,["onConfirmBtnClick"]))}})),pt={name:"clan_admins",placeholder:"Clan Users",multiple:""},dt=["value","selected"],ct={data(){return{clan_users:[],clan_admins:[]}},props:{clan_data:{required:!0,type:Object}},methods:{confirmBtnClick(t){console.log("Setting admins:",t),h.ajax({url:"/api/clans/editClanAdmins",type:"post",data:JSON.stringify(c({_id:this.clan_data._id},t)),dataType:"json",contentType:"application/json",success:e=>{console.log(e),this.$emit("clan_users_edited",e),this.$emit("cancelBtnClick")},error:e=>{console.error(e),this.$refs.popupLogin.blinkAll()}})},getClanUsers:function(){h.ajax({url:"/api/clans/getClanUsers",type:"get",data:this.clan_data,dataType:"json",success:t=>{this.clan_users=t},error:t=>{console.error(t),this.$refs.popupLogin.blinkAll()}})},getClanAdmins:function(){h.ajax({url:"/api/clans/getClanAdmins",type:"get",data:this.clan_data,dataType:"json",success:t=>{this.clan_admins=t},error:t=>{console.error("clan admins",t),this.$refs.popupLogin.blinkAll()}})}},components:{popup:m},created(){console.log("clan_data",this.clan_data),console.log("clan_admins",this.clan_admins),this.getClanUsers(),this.getClanAdmins()}},mt=C(f(c({},ct),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupLogin",title:"Clan Admins",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confirmBtnClick},{default:g(()=>[l("select",pt,[(a(!0),i(_,null,v(e.clan_users.sort(),o=>(a(),i("option",{value:o._id,selected:e.clan_admins.includes(o._id)},u(o.username),9,dt))),256))])]),_:1},8,["onConfirmBtnClick"]))}}));const gt={class:"gameGroupCard shadow"},ft={class:"groupName tag"},_t={class:"tag"},ht={class:"tag noBg redTrans"},Ct={class:"tag noBg redTrans"},vt={data(){return{onHover:!1,hoverMenuLeft:0}},props:{wl_data:{required:!0,type:Object},hoverMenuVisible:{required:!1,type:Boolean,default:!0}},methods:{deleteRecord:function(t){console.log("Removing",this.$props.wl_data),h.ajax({url:"/api/gameGroups/write/remove",type:"post",data:this.$props.wl_data,dataType:"json",success:e=>{console.log(e),t()}})},updateHoverMenuLeft:function(t){this.hoverMenuLeft=t.target.scrollLeft}}},bt=C(f(c({},vt),{setup(t){return A(e=>({"5496eb71":e.hoverMenuLeft+"px"})),(e,n)=>(a(),i("div",gt,[l("span",{class:y(["dot",{fill:t.wl_data.approved}])},null,2),l("div",ft,u(t.wl_data.username),1),l("div",{class:"mainGroupContainer",onScroll:n[2]||(n[2]=(...o)=>e.updateHoverMenuLeft&&e.updateHoverMenuLeft(...o))},[l("span",_t,u(t.wl_data.group_full_data[0].group_name),1),l("span",ht,u(t.wl_data.steamid64),1),l("span",Ct,u(t.wl_data.discord_username),1),t.hoverMenuVisible?(a(),i("div",{key:0,class:y(["hoverMenu",{vis:e.onHover}])},[l("button",{onClick:n[0]||(n[0]=o=>e.$emit("confirm",{wl_data:t.wl_data,callback:e.deleteRecord}))},"Delete"),l("button",{onClick:n[1]||(n[1]=o=>e.$emit("edit",{wl_data:t.wl_data}))},"Edit")],2)):d("",!0)],32)]))}}));var kt=$(bt,[["__scopeId","data-v-880bff42"]]);const $t={data(){return{whitelist_clans:[],sel_clan:{},wl_players:[],editor:!1}},methods:{log:console.log,getWhitelistTabClans:function(){fetch("/api/whitelist/read/getAllClans").then(t=>t.json()).then(t=>{this.whitelist_clans=t,this.sel_clan=this.whitelist_clans[0]._id,this.getClanWhitelist()})},selectClanChanged:function(t){this.sel_clan=t.target.value,this.getClanWhitelist()},getClanWhitelist(){h.ajax({url:"/api/whitelist/read/getAll",type:"get",data:{sel_clan_id:this.sel_clan},dataType:"json",contentType:"application/json",success:t=>{console.log("Whitelist player",t),this.wl_players=t},error:t=>{console.error(t)}})},checkPerms:function(){fetch("/api/whitelist/write/checkPerm").then(t=>t.json()).then(t=>{console.log("editor?",t),this.editor=!0})}},created(){this.checkPerms(),this.getWhitelistTabClans()},components:{whitelistUserCard:kt}},yt=["disabled"],wt=["value"];function Bt(t,e,n,o,s,p){const b=H("whitelistUserCard");return a(),i(_,null,[l("select",{name:"clan_selector",ref:"clan_selector",disabled:s.whitelist_clans.length==1,onChange:e[0]||(e[0]=(...k)=>p.selectClanChanged&&p.selectClanChanged(...k))},[(a(!0),i(_,null,v(s.whitelist_clans,k=>(a(),i("option",{value:k._id},u(k.full_name),9,wt))),256))],40,yt),s.editor?(a(),i("button",{key:0,class:"addHorizontal",onClick:e[1]||(e[1]=k=>t.$emit("addNewWhitelistUser",s.sel_clan))})):d("",!0),(a(!0),i(_,null,v(s.wl_players,k=>(a(),r(b,{wl_data:k,hoverMenuVisible:s.editor},null,8,["wl_data","hoverMenuVisible"]))),256))],64)}var Tt=$($t,[["render",Bt],["__scopeId","data-v-fba9dd1a"]]);const Gt=l("input",{name:"username",type:"text",placeholder:"Username"},null,-1),jt=l("input",{name:"steamid64",type:"text",regex:"^\\d{17}$",placeholder:"SteamID64"},null,-1),At={name:"group"},Nt=l("option",{hidden:"",selected:"",value:""},"Select a group",-1),Lt=["value"],Pt=l("input",{name:"discordUsername",type:"text",placeholder:"Discord Username",optional:"",regex:"^.{3,32}#[0-9]{4}$"},null,-1),St={data(){return{game_groups:[]}},props:{sel_clan:{required:!0,type:Object}},methods:{confBtnClick:function(t){t.sel_clan_id=this.sel_clan;const e=this.$refs.popupLogin;h.ajax({url:"/api/whitelist/write/addPlayer",type:"post",data:JSON.stringify(t),dataType:"json",contentType:"application/json",timeout:6e4,success:n=>{console.log(n),this.$emit("cancelBtnClick")},error:n=>{console.error(n),e.blinkAll()}})},getGameGroups(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{this.game_groups=t})}},created(){console.log("Adding new whitelist user for",this.sel_clan,"clan"),this.getGameGroups()},components:{popup:m}},Ut=C(f(c({},St),{setup(t){return(e,n)=>(a(),r(m,{ref:"popupLogin",title:"Add Player",onCancelBtnClick:n[0]||(n[0]=o=>e.$emit("cancelBtnClick",o)),onConfirmBtnClick:e.confBtnClick,"hide-cancel":!1},{default:g(()=>[Gt,jt,l("select",At,[Nt,(a(!0),i(_,null,v(e.game_groups,o=>(a(),i("option",{value:o._id},u(o.group_name),9,Lt))),256))]),Pt]),_:1},8,["onConfirmBtnClick"]))}}));const qt=["src"],Et={id:"hdBtnContainer"},Mt={data(){return{loginRequired:!0,app_title:"Squad Whitelister",accent_color:"#ffc40b",currentTab:"Home",logo_url:"./assets/logo.svg",tabs:[],tabBtns:[],popups:{addingNewClan:!1,addingNewGameGroup:!1,creatingNewRole:!1,confirm:!1,registration:!1,login:!1,editClan:!1,editGameGroup:!1,editClanUsers:!1,addNewWhitelistUser:!1},clans:[],inEditingClan:-1,game_groups:[],inEditingGroup:-1,inUserEditingClan:-1,pointers:{confirmPopup:{},editClanUsers:{}},tabData:{Whitelist:{sel_clan:{}},Groups:{editor:!1}}}},methods:{getAppPersonalization:function(){fetch("/api/getAppPersonalization").then(t=>t.json()).then(t=>{this.app_title=t.name,this.accent_color=t.accent_color,this.logo_url=t.logo_url})},checkSession:function(){fetch("/api/checkSession").then(t=>t.json()).then(t=>{this.setLoginRequired(t.status=="login_required")})},getTabs:function(){fetch("/api/getTabs").then(t=>t.json()).then(t=>{console.log(t),this.tabs=t.tabs,this.tabs.forEach(e=>this.tabBtns.push(e.name)),this.$nextTick(()=>{this.setCurrentTab(this.tabs[0].name)})})},logout:function(){fetch("/api/logout").then(t=>t.json()).then(t=>{this.setLoginRequired(t.status=="logout_ok")})},setLoginRequired:function(t){this.loginRequired=t,this.currentTab=t?"Login":"Home"},setCurrentTab:function(t){this.currentTab=t},appendNewClan:function(t){console.log("Appending new clan",t.clan_data),this.clans.push(t.clan_data)},appendNewGroup:function(t){console.log("Appending new group",t.clan_data),this.game_groups.push(t.data),this.popups.addingNewGameGroup=!1},getClans:function(){fetch("/api/clans/getAllClans").then(t=>t.json()).then(t=>{console.log("All clans",t),this.clans=t})},getGameGroups:function(){fetch("/api/gameGroups/read/getAllGroups").then(t=>t.json()).then(t=>{console.log("All groups",t),this.game_groups=t})},confirmEvt:function(t="",e="",n){this.popups.confirm=!0,this.pointers.confirmPopup!=null&&(this.pointers.confirmPopup.setProps(t,e),this.pointers.confirmPopup.setCallback(n))},removeClan:function(t){this.confirmEvt("Confirm deletion?","Do you really want to delete "+t.clan_data.tag+" clan?",()=>{t.callback(()=>{this.clans=this.clans.filter(e=>e._id!=t.clan_data._id),this.popups.confirm=!1})})},removeGroup:function(t){this.confirmEvt("Confirm deletion?","Do you really want to delete "+t.group_data.group_name+" group?",()=>{t.callback(()=>{this.game_groups=this.game_groups.filter(e=>e._id!=t.group_data._id),this.popups.confirm=!1})})},updateJson:function(t,e){for(let n in e){const o=Object.prototype.toString.call(e[n]),s=Object.prototype.toString.call(e);if(t[n]==null||t[n]&&s=="[object Array]"&&!t[n].includes(e[n]))switch(o){case"[object Object]":t[n]={};break;case"[object Array]":t[n]=[];break;default:s=="[object Array]"?t.push(e[n]):t[n]=e[n];break}typeof e[n]=="object"&&this.updateJson(t[n],e[n])}},checkPerms:function(t,e=n=>{}){fetch(t).then(n=>n.json()).then(n=>{console.log("editor?",n),e(n)})}},created(){this.checkSession(),this.getAppPersonalization(),this.getTabs()}},Rt=C(f(c({},Mt),{setup(t){return A(e=>({"3caa953e":e.accent_color})),(e,n)=>(a(),i(_,null,[l("title",null,u(e.currentTab)+" | "+u(e.app_title),1),l("header",null,[l("img",{alt:"Squad Whitelister Logo",class:"logo",src:e.logo_url},null,8,qt),l("h1",null,u(e.app_title),1),l("div",Et,[e.loginRequired?d("",!0):(a(),i("button",{key:0,onClick:n[0]||(n[0]=(...o)=>e.logout&&e.logout(...o))},"Logout")),e.loginRequired?(a(),i("button",{key:1,onClick:n[1]||(n[1]=o=>e.popups.login=!0)},"Login")):d("",!0),e.loginRequired?(a(),i("button",{key:2,onClick:n[2]||(n[2]=o=>e.popups.registration=!0)},"Sign Up")):d("",!0)]),B(ce,{visible:!e.loginRequired},{default:g(()=>[(a(!0),i(_,null,v(e.tabBtns,o=>(a(),r(fe,{onUpdateTab:e.setCurrentTab,title:o,currentTab:e.currentTab},null,8,["onUpdateTab","title","currentTab"]))),256))]),_:1},8,["visible"])]),l("main",null,[U(B(Q,null,{default:g(()=>[e.popups.login?(a(),r(ne,{key:0,onCancelBtnClick:n[3]||(n[3]=o=>e.popups.login=!1),onLogin_done:n[4]||(n[4]=o=>{e.loginRequired=!1,e.popups.login=!1})})):d("",!0),e.popups.registration?(a(),r(ue,{key:1,onCancelBtnClick:n[5]||(n[5]=o=>e.popups.registration=!1),onRegistration_done:n[6]||(n[6]=o=>{e.loginRequired=!1,e.popups.registration=!1})})):d("",!0),e.popups.addingNewClan?(a(),r(we,{key:2,onCancelBtnClick:n[7]||(n[7]=o=>e.popups.addingNewClan=!1),onNew_clan:e.appendNewClan},null,8,["onNew_clan"])):d("",!0),e.popups.addingNewGameGroup?(a(),r(Ne,{key:3,onCancelBtnClick:n[8]||(n[8]=o=>e.popups.addingNewGameGroup=!1),onNew_game_group:e.appendNewGroup},null,8,["onNew_game_group"])):d("",!0),U(B(Ve,{ref:o=>{e.pointers.confirmPopup=o},onCancelBtnClick:n[9]||(n[9]=o=>e.popups.confirm=!1)},null,512),[[q,e.popups.confirm]]),e.popups.editClan?(a(),r(nt,{key:4,onCancelBtnClick:n[10]||(n[10]=o=>e.popups.editClan=!1),clan_data:e.clans[e.inEditingClan],onClan_edited:n[11]||(n[11]=o=>e.clans[e.inEditingClan]=o)},null,8,["clan_data"])):d("",!0),e.popups.editGameGroup?(a(),r(ut,{key:5,onCancelBtnClick:n[12]||(n[12]=o=>e.popups.editGameGroup=!1),group_data:e.game_groups[e.inEditingGroup],onEdited:n[13]||(n[13]=o=>e.game_groups[e.inEditingGroup]=o)},null,8,["group_data"])):d("",!0),e.popups.editClanUsers?(a(),r(mt,{key:6,clan_data:e.clans[e.inUserEditingClan],onCancelBtnClick:n[14]||(n[14]=o=>{e.popups.editClanUsers=!1})},null,8,["clan_data"])):d("",!0),e.popups.addNewWhitelistUser?(a(),r(Ut,{key:7,onCancelBtnClick:n[15]||(n[15]=o=>e.popups.addNewWhitelistUser=!1),sel_clan:e.tabData.Whitelist.sel_clan},null,8,["sel_clan"])):d("",!0)]),_:1},512),[[q,e.popups.addingNewClan||e.popups.addingNewGameGroup||e.popups.confirm||e.popups.login||e.popups.registration||e.popups.editClan||e.popups.editGameGroup||e.popups.editClanUsers||e.popups.addNewWhitelistUser]]),e.currentTab=="Home"?(a(),r(w,{key:0,currentTab:e.currentTab},null,8,["currentTab"])):e.currentTab=="Clans"?(a(),r(w,{key:1,currentTab:e.currentTab,horizontal:!0,onVnodeMounted:e.getClans},{default:g(()=>[l("button",{class:"addNewClan clanCard",onClick:n[16]||(n[16]=o=>e.popups.addingNewClan=!0)}),(a(!0),i(_,null,v(e.clans,o=>(a(),r(Oe,{onConfirm:e.removeClan,class:"clanCard shadow",clan_data:o,onEdit_clan:s=>{e.popups.editClan=!0,e.inEditingClan=e.clans.indexOf(o)},onEdit_clan_users:s=>{e.popups.editClanUsers=!0,e.inUserEditingClan=e.clans.indexOf(o)}},null,8,["onConfirm","clan_data","onEdit_clan","onEdit_clan_users"]))),256))]),_:1},8,["currentTab","onVnodeMounted"])):e.currentTab=="Groups"?(a(),r(w,{key:2,currentTab:e.currentTab,onVnodeMounted:n[18]||(n[18]=()=>{e.getGameGroups(),e.checkPerms("/api/gameGroups/write/checkPerm",o=>{e.tabData.Groups.editor=!!o})})},{default:g(()=>[e.tabData.Groups.editor?(a(),i("button",{key:0,class:"addNewGameGroup",onClick:n[17]||(n[17]=o=>e.popups.addingNewGameGroup=!0)})):d("",!0),(a(!0),i(_,null,v(e.game_groups,o=>(a(),r(Ze,{onConfirm:e.removeGroup,class:"gameGroupCard shadow",group_data:o,onEdit:s=>{e.popups.editGameGroup=!0,e.inEditingGroup=e.game_groups.indexOf(o)},hoverMenuVisible:e.tabData.Groups.editor},null,8,["onConfirm","group_data","onEdit","hoverMenuVisible"]))),256))]),_:1},8,["currentTab"])):e.currentTab=="Roles"?(a(),r(w,{key:3,currentTab:e.currentTab},{default:g(()=>[l("button",{class:"createRole",onClick:n[19]||(n[19]=o=>e.popups.creatingNewRole=!0)})]),_:1},8,["currentTab"])):e.currentTab=="Whitelist"?(a(),r(w,{key:4,currentTab:e.currentTab},{default:g(()=>[B(Tt,{onAddNewWhitelistUser:n[20]||(n[20]=o=>{e.popups.addNewWhitelistUser=!0,e.tabData.Whitelist.sel_clan=o})})]),_:1},8,["currentTab"])):d("",!0)])],64))}}));D(Rt).mount("#app");
